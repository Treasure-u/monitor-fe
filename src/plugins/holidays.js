const moment = require('moment')
export function isTradingDay(s) {
    const date = moment(s);
    if (HOLIDAYS.has(date.format("YYYY-MM-DD"))) { // 节假日
        return false;
    } else if (date.format("d") == 0 || date.format("d") == 6) { // 周末
        return false;
    } else {
        return true;
    }
}

export function NTradingDaysAfter(n, start_date) {
    let d = moment(new Date(start_date))
    while (n) {
        d = d.add(1, 'd')
        while (!isTradingDay(d)) {
            d = d.add(1, 'd')
        }
        n -= 1;
    }
    return d
}
export default {isTradingDay, NTradingDaysAfter}

const HOLIDAYS = new Set([
    "2021-01-01",
    "2021-01-02",
    "2021-01-03",
    "2021-02-11",
    "2021-02-12",
    "2021-02-13",
    "2021-02-14",
    "2021-02-15",
    "2021-02-16",
    "2021-02-17",
    "2021-04-03",
    "2021-04-04",
    "2021-04-05",
    "2021-05-01",
    "2021-05-02",
    "2021-05-03",
    "2021-05-04",
    "2021-05-05",
    "2021-06-12",
    "2021-06-13",
    "2021-06-14",
    "2021-09-19",
    "2021-09-20",
    "2021-09-21",
    "2021-10-01",
    "2021-10-02",
    "2021-10-03",
    "2021-10-04",
    "2021-10-05",
    "2021-10-06",
    "2021-10-07",
    "2022-01-01",
    "2022-01-02",
    "2022-01-03",
    "2022-01-31",
    "2022-02-01",
    "2022-02-02",
    "2022-02-03",
    "2022-02-04",
    "2022-02-05",
    "2022-02-06",
    "2022-04-03",
    "2022-04-04",
    "2022-04-05",
    "2022-04-30",
    "2022-05-01",
    "2022-05-02",
    "2022-05-03",
    "2022-05-04",
    "2022-06-03",
    "2022-06-04",
    "2022-06-05",
    "2022-09-10",
    "2022-09-11",
    "2022-09-12",
    "2022-10-01",
    "2022-10-02",
    "2022-10-03",
    "2022-10-04",
    "2022-10-05",
    "2022-10-06",
    "2022-10-07",
])
